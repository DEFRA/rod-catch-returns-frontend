{% extends "layout.html" %}

{% from "navigation.njk" import navigationHeaderBlock %}

{% from "button/macro.njk" import govukButton %}
{% from "details/macro.njk" import govukDetails %}
{% from "table/macro.njk" import govukTable %}

{% block header %}
  {% if fmt %}
    {{ navigationHeaderBlock('age-weight-key') }}
  {% else %}
    {{ super() }}
  {% endif %}
{% endblock %}

{% set errorRows = [] %}
{% for error in errorItems %}
  {{ errorRows.push(
    [
      {
        text: loop.index
      },
      {
        text: error.message
      }
    ]
  ) }}
{% endfor %}

{% block pageTitle %}Errors found in '{{ filename }}' - GOV.UK{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">Errors found in '{{ filename }}'</h1>
    <label class='govuk-label'>Before uploading the age weight key again, correct all the errors in your file.</label>

    {{ govukDetails({
      summaryText: "Your CSV file needs to look like this example",
      html: "
        <table>
          <tr>
            <th>Weight</th>
            <th>June</th>
            <th>July</th>
            <th>August</th>
          </tr>
          <tr>
            <td>1</td>
            <td>1.000000</td>
            <td>1.000000</td>
            <td>0.919192</td>
          </tr>
          <tr>
            <td>2</td>
            <td>0.500000</td>
            <td>0.897436</td>
            <td>0.510204</td>
          </tr>
          <tr>
            <td>3</td>
            <td>0.000000</td>
            <td>0.107143</td>
            <td>0.986111</td>
          </tr>
        </table>
      "
    }) }}

    {{ govukTable({
      firstCellIsHeader: true,
      head: [
        {
          text: "Number"
        },
        {
          text: "Error"
        }
      ],
      rows: errorRows
    }) }}

    <a id="age-weight-key" class="govuk-link govuk-body-m" href="/age-weight-key">Upload the age weight key again</a>

  </div>
</div>
{% endblock %}
